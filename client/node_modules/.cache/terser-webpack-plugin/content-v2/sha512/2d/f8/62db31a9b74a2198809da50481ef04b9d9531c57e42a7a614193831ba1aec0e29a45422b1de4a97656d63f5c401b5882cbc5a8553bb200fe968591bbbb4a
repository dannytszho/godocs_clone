{"code":"(this[\"webpackJsonpgoogle-docs\"]=this[\"webpackJsonpgoogle-docs\"]||[]).push([[0],{89:function(e,t,n){},90:function(e,t,n){\"use strict\";n.r(t);var c=n(0),o=n.n(c),u=n(42),a=n.n(u),i=n(26),s=n(43),l=n.n(s),r=(n(54),n(44)),d=n(1),f=n(3),b=[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{list:\"ordered\"},{list:\"bullet\"}],[\"bold\",\"italic\",\"underline\"],[{color:[]},{background:[]}],[{script:\"sub\"},{script:\"super\"}],[{align:[]}],[\"image\",\"blockquote\",\"code-block\"],[\"clean\"]];function j(){var e=Object(d.g)().id,t=Object(c.useState)(),n=Object(i.a)(t,2),o=n[0],u=n[1],a=Object(c.useState)(),s=Object(i.a)(a,2),j=s[0],O=s[1];console.log(e),Object(c.useEffect)((function(){var e=Object(r.io)(\"http://localhost:3001\");return u(e),function(){e.disconnect()}}),[]),Object(c.useEffect)((function(){null!=o&&null!=j&&(o.once(\"load-document\",(function(e){j.setContents(e),j.enable()})),o.emit(\"get-document\",e))}),[o,j],e),Object(c.useEffect)((function(){if(null!=o&&null!=j){var e=setInterval((function(){o.emit(\"save-document\",j.getContents())}),200);return function(){clearInterval(e)}}}),[o,j]),Object(c.useEffect)((function(){if(null!=o&&null!=j){var e=function(e){j.updateContents(e)};return o.on(\"receive-changes\",e),function(){o.off(\"receive-changes\",e)}}}),[o,j]),Object(c.useEffect)((function(){if(null!=o&&null!=j){var e=function(e,t,n){\"user\"===n&&o.emit(\"send-changes\",e)};return j.on(\"text-change\",e),function(){j.off(\"text-change\",e)}}}),[o,j]);var h=Object(c.useCallback)((function(e){if(null!=e){e.innderHTML=\"\";var t=document.createElement(\"div\");e.append(t);var n=new l.a(t,{theme:\"snow\",modules:{toolbar:b}});n.disable(),n.setText(\"Loading...\"),O(n)}}),[]);return Object(f.jsx)(\"div\",{className:\"container\",ref:h})}var O=n(23),h=n(92);var g=function(){return Object(f.jsx)(O.a,{children:Object(f.jsxs)(d.d,{children:[Object(f.jsx)(d.b,{path:\"/\",exact:!0,children:Object(f.jsx)(d.a,{to:\"/documents/\".concat(Object(h.a)())})}),Object(f.jsx)(d.b,{path:\"/documents/:id\",children:Object(f.jsx)(j,{})})]})})};n(89);a.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById(\"root\"))}},[[90,1,2]]]);","name":"static/js/main.95db48d7.chunk.js","map":{"version":3,"sources":["static/js/main.95db48d7.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","dist_quill","quill_default","build","react_router","jsx_runtime","TOOLBAR_OPTIONS","header","font","list","color","background","script","align","TextEditor","documentID","Object","id","_useState","_useState2","socket","setSocket","_useState3","_useState4","quill","setQuill","console","log","s","disconnect","once","document","setContents","enable","emit","interval","setInterval","getContents","clearInterval","handler","delta","updateContents","on","off","oldDelta","source","wrapperRef","wrapper","innderHTML","editor","createElement","append","q","a","theme","modules","toolbar","disable","setText","className","ref","react_router_dom","v4","src_App","children","path","exact","to","concat","render","StrictMode","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpgoogle-docs\"] = this[\"webpackJsonpgoogle-docs\"] || []).push([[0],{\n\n/***/ 89:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 90:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(42);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(26);\n\n// EXTERNAL MODULE: ./node_modules/quill/dist/quill.js\nvar dist_quill = __webpack_require__(43);\nvar quill_default = /*#__PURE__*/__webpack_require__.n(dist_quill);\n\n// EXTERNAL MODULE: ./node_modules/quill/dist/quill.snow.css\nvar quill_snow = __webpack_require__(54);\n\n// EXTERNAL MODULE: ./node_modules/socket.io-client/build/index.js\nvar build = __webpack_require__(44);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js + 4 modules\nvar react_router = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(3);\n\n// CONCATENATED MODULE: ./src/TextEditor.js\nvar SAVE_INTERVAL_MS=200;var TOOLBAR_OPTIONS=[[{header:[1,2,3,4,5,6,false]}],[{font:[]}],[{list:\"ordered\"},{list:\"bullet\"}],[\"bold\",\"italic\",\"underline\"],[{color:[]},{background:[]}],[{script:\"sub\"},{script:\"super\"}],[{align:[]}],[\"image\",\"blockquote\",\"code-block\"],[\"clean\"]];function TextEditor(){var _useParams=Object(react_router[\"g\" /* useParams */])(),documentID=_useParams.id;var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),socket=_useState2[0],setSocket=_useState2[1];var _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),quill=_useState4[0],setQuill=_useState4[1];console.log(documentID);Object(react[\"useEffect\"])(function(){var s=Object(build[\"io\"])(\"http://localhost:3001\");setSocket(s);return function(){s.disconnect();};},[]);Object(react[\"useEffect\"])(function(){if(socket==null||quill==null)return;socket.once('load-document',function(document){quill.setContents(document);quill.enable();});socket.emit('get-document',documentID);},[socket,quill],documentID);Object(react[\"useEffect\"])(function(){if(socket==null||quill==null)return;var interval=setInterval(function(){socket.emit(\"save-document\",quill.getContents());},SAVE_INTERVAL_MS);return function(){clearInterval(interval);};},[socket,quill]);Object(react[\"useEffect\"])(function(){if(socket==null||quill==null)return;var handler=function handler(delta){quill.updateContents(delta);};socket.on('receive-changes',handler);return function(){socket.off('receive-changes',handler);};},[socket,quill]);Object(react[\"useEffect\"])(function(){if(socket==null||quill==null)return;var handler=function handler(delta,oldDelta,source){if(source!=='user')return;socket.emit(\"send-changes\",delta);};quill.on('text-change',handler);return function(){quill.off('text-change',handler);};},[socket,quill]);var wrapperRef=Object(react[\"useCallback\"])(function(wrapper){if(wrapper==null)return;wrapper.innderHTML=\"\";var editor=document.createElement(\"div\");wrapper.append(editor);var q=new quill_default.a(editor,{theme:\"snow\",modules:{toolbar:TOOLBAR_OPTIONS}});q.disable();q.setText('Loading...');setQuill(q);},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"container\",ref:wrapperRef});}\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js + 4 modules\nvar react_router_dom = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/uuid/dist/esm-browser/v4.js + 4 modules\nvar v4 = __webpack_require__(92);\n\n// CONCATENATED MODULE: ./src/App.js\nfunction App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"d\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/\",exact:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:\"/documents/\".concat(Object(v4[\"a\" /* default */])())})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/documents/:id\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextEditor,{})})]})});}/* harmony default export */ var src_App = (App);\n// EXTERNAL MODULE: ./src/style.css\nvar style = __webpack_require__(89);\n\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));\n\n/***/ })\n\n},[[90,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/node_modules/postcss-loader/src/index.js??postcss!/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/style.css","/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/TextEditor.js","/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/App.js","/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/index.js"],"names":["SAVE_INTERVAL_MS","TOOLBAR_OPTIONS","header","font","list","color","background","script","align","TextEditor","useParams","documentID","id","useState","socket","setSocket","quill","setQuill","console","log","useEffect","s","io","disconnect","once","document","setContents","enable","emit","interval","setInterval","getContents","clearInterval","handler","delta","updateContents","on","off","oldDelta","source","wrapperRef","useCallback","wrapper","innderHTML","editor","createElement","append","q","Quill","theme","modules","toolbar","disable","setText","App","uuidV4","ReactDOM","render","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import { useCallback, useEffect, useState } from 'react'\nimport Quill from \"quill\"\nimport \"quill/dist/quill.snow.css\"\nimport { io } from 'socket.io-client'\nimport { useParams } from \"react-router-dom\"\n\nconst SAVE_INTERVAL_MS = 200\nconst TOOLBAR_OPTIONS = [\n    [{ header: [1 ,2, 3, 4, 5 ,6, false] }],\n    [{ font: [] }],\n    [{ list: \"ordered\" }, { list: \"bullet\" }],\n    [\"bold\", \"italic\", \"underline\"],\n    [{ color: [] }, { background: [] }],\n    [{ script: \"sub\"}, { script: \"super\" }],\n    [{ align: [] }],\n    [\"image\", \"blockquote\", \"code-block\"],\n    [\"clean\"],\n]\n\nexport default function TextEditor() {\n    const {id: documentID} = useParams()\n    const [socket, setSocket] = useState()\n    const [quill, setQuill] = useState()\n    console.log(documentID)\n\n\n    useEffect(() => {\n        const s = io(\"http://localhost:3001\")\n        setSocket(s)\n\n        return () => {\n            s.disconnect()\n        }\n    }, [])\n\n    useEffect(() => {\n        if (socket == null || quill == null) return\n\n        socket.once('load-document', document => {\n            quill.setContents(document)\n            quill.enable()\n        })\n\n        socket.emit('get-document', documentID)\n\n    }, [socket, quill], documentID)\n\n    useEffect(() => {\n        if (socket == null || quill == null) return\n\n        const interval = setInterval(() => {\n            socket.emit(\"save-document\", quill.getContents())\n        }, SAVE_INTERVAL_MS)\n\n        return ()=> {\n            clearInterval(interval)\n        }\n    }, [socket, quill])\n\n    useEffect(() => {\n        if (socket == null || quill == null) return\n\n        const handler = (delta) => {\n            quill.updateContents(delta)\n        }\n        \n        socket.on('receive-changes', handler)\n\n        return () => {\n            socket.off('receive-changes', handler)\n        }\n    },[socket, quill])\n\n    useEffect(() => {\n        if (socket == null || quill == null) return\n\n        const handler = (delta, oldDelta, source) => {\n            if (source !== 'user') return\n            socket.emit(\"send-changes\", delta)\n        }\n        quill.on('text-change', handler)\n\n        return () => {\n            quill.off('text-change', handler)\n        }\n    },[socket, quill])\n\n    const wrapperRef = useCallback(wrapper => {\n        if (wrapper == null) return\n\n        wrapper.innderHTML = \"\"\n        const editor = document.createElement(\"div\")\n        wrapper.append(editor)\n        const q = new Quill(editor, {\n            theme: \"snow\", \n            modules: { toolbar: TOOLBAR_OPTIONS },\n        })\n        q.disable()\n        q.setText('Loading...')\n        setQuill(q)\n    }, [])\n    return <div className=\"container\" ref={wrapperRef}></div>\n}\n","import TextEditor from './TextEditor'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from 'react-router-dom'\n\nimport { v4 as uuidV4 } from \"uuid\"\n\nfunction App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact>\n          <Redirect to={`/documents/${uuidV4()}`} />\n        </Route>\n        <Route path=\"/documents/:id\">\n          <TextEditor />\n        </Route>\n\n      </Switch>\n    </Router>\n\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './style.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"]}}