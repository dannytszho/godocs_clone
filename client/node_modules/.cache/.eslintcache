[{"/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/index.js":"1","/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/App.js":"2","/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/TextEditor.js":"3"},{"size":219,"mtime":1630985081742,"results":"4","hashOfConfig":"5"},{"size":464,"mtime":1631273649158,"results":"6","hashOfConfig":"5"},{"size":2702,"mtime":1631277292682,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"1i3jzh9",{"filePath":"11","messages":"12","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},{"filePath":"13","messages":"14","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"15"},"/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/index.js",[],["16","17"],"/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/App.js",[],"/Users/dannytszho/Desktop/Coding/Open_Source_Projects/google-docs/client/src/TextEditor.js",["18"],"import { useCallback, useEffect, useState } from 'react'\nimport Quill from \"quill\"\nimport \"quill/dist/quill.snow.css\"\nimport { io } from 'socket.io-client'\nimport { useParams } from \"react-router-dom\"\n\nconst SAVE_INTERVAL_MS = 200\nconst TOOLBAR_OPTIONS = [\n    [{ header: [1 ,2, 3, 4, 5 ,6, false] }],\n    [{ font: [] }],\n    [{ list: \"ordered\" }, { list: \"bullet\" }],\n    [\"bold\", \"italic\", \"underline\"],\n    [{ color: [] }, { background: [] }],\n    [{ script: \"sub\"}, { script: \"super\" }],\n    [{ align: [] }],\n    [\"image\", \"blockquote\", \"code-block\"],\n    [\"clean\"],\n]\n\nexport default function TextEditor() {\n    const {id: documentID} = useParams()\n    const [socket, setSocket] = useState()\n    const [quill, setQuill] = useState()\n    console.log(documentID)\n\n\n    useEffect(() => {\n        const s = io(\"http://localhost:3001\")\n        setSocket(s)\n\n        return () => {\n            s.disconnect()\n        }\n    }, [])\n\n    useEffect(() => {\n        if (socket == null || quill == null) return\n\n        socket.once('load-document', document => {\n            quill.setContents(document)\n            quill.enable()\n        })\n\n        socket.emit('get-document', documentID)\n\n    }, [socket, quill], documentID)\n\n    useEffect(() => {\n        if (socket == null || quill == null) return\n\n        const interval = setInterval(() => {\n            socket.emit(\"save-document\", quill.getContents())\n        }, SAVE_INTERVAL_MS)\n\n        return ()=> {\n            clearInterval(interval)\n        }\n    }, [socket, quill])\n\n    useEffect(() => {\n        if (socket == null || quill == null) return\n\n        const handler = (delta) => {\n            quill.updateContents(delta)\n        }\n        \n        socket.on('receive-changes', handler)\n\n        return () => {\n            socket.off('receive-changes', handler)\n        }\n    },[socket, quill])\n\n    useEffect(() => {\n        if (socket == null || quill == null) return\n\n        const handler = (delta, oldDelta, source) => {\n            if (source !== 'user') return\n            socket.emit(\"send-changes\", delta)\n        }\n        quill.on('text-change', handler)\n\n        return () => {\n            quill.off('text-change', handler)\n        }\n    },[socket, quill])\n\n    const wrapperRef = useCallback(wrapper => {\n        if (wrapper == null) return\n\n        wrapper.innderHTML = \"\"\n        const editor = document.createElement(\"div\")\n        wrapper.append(editor)\n        const q = new Quill(editor, {\n            theme: \"snow\", \n            modules: { toolbar: TOOLBAR_OPTIONS },\n        })\n        q.disable()\n        q.setText('Loading...')\n        setQuill(q)\n    }, [])\n    return <div className=\"container\" ref={wrapperRef}></div>\n}\n",{"ruleId":"19","replacedBy":"20"},{"ruleId":"21","replacedBy":"22"},{"ruleId":"23","severity":1,"message":"24","line":46,"column":8,"nodeType":"25","endLine":46,"endColumn":23,"suggestions":"26"},"no-native-reassign",["27"],"no-negated-in-lhs",["28"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'documentID'. Either include it or remove the dependency array.","ArrayExpression",["29"],"no-global-assign","no-unsafe-negation",{"desc":"30","fix":"31"},"Update the dependencies array to be: [socket, quill, documentID]",{"range":"32","text":"33"},[1191,1206],"[socket, quill, documentID]"]